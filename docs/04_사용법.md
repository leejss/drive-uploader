# 사용법

## 기본 명령어 구조

```bash
drive-uploader [옵션] <명령어> [인자]
```

### 현재 지원하는 명령어

- **파일 업로드**: `-file <경로>` 옵션을 사용한 단일 파일 업로드

## 파일 업로드

### 단일 파일 업로드

가장 기본적인 파일 업로드 방법입니다:

```bash
# 기본 사용법
drive-uploader -file /path/to/your/file.txt

# 상대 경로도 가능
drive-uploader -file ./documents/report.pdf

# 홈 디렉토리 파일
drive-uploader -file ~/Downloads/image.jpg
```

#### 실행 예시

```bash
$ drive-uploader -file test.txt
2025/01/15 10:30:15 Attempting to upload file: test.txt
2025/01/15 10:30:16 Successfully created drive service.
2025/01/15 10:30:16 Starting file upload...
2025/01/15 10:30:18 File uploaded successfully!
2025/01/15 10:30:18 File Name: test.txt
2025/01/15 10:30:18 File ID: 1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms
2025/01/15 10:30:18 View online: https://drive.google.com/file/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms/view?usp=sharing
```

### 다양한 파일 타입 업로드

#### 텍스트 파일
```bash
drive-uploader -file README.md
drive-uploader -file config.json
drive-uploader -file notes.txt
```

#### 이미지 파일
```bash
drive-uploader -file photo.jpg
drive-uploader -file screenshot.png
drive-uploader -file diagram.svg
```

#### 문서 파일
```bash
drive-uploader -file presentation.pptx
drive-uploader -file spreadsheet.xlsx
drive-uploader -file document.pdf
```

#### 압축 파일
```bash
drive-uploader -file backup.zip
drive-uploader -file project.tar.gz
drive-uploader -file archive.7z
```

## 실용적인 사용 시나리오

### 1. 백업 자동화

```bash
#!/bin/bash
# backup.sh - 매일 백업 스크립트

DATE=$(date +%Y%m%d)
BACKUP_FILE="backup_${DATE}.tar.gz"

# 프로젝트 디렉토리 압축
tar -czf $BACKUP_FILE ./project/

# 구글 드라이브에 업로드
drive-uploader -file $BACKUP_FILE

# 로컬 백업 파일 정리 (선택사항)
rm $BACKUP_FILE

echo "백업 완료: $BACKUP_FILE"
```

### 2. 스크린샷 즉시 업로드

```bash
#!/bin/bash
# screenshot-upload.sh

# 스크린샷 캡처 (macOS)
screenshot_file="screenshot_$(date +%Y%m%d_%H%M%S).png"
screencapture -i $screenshot_file

# 구글 드라이브에 업로드
drive-uploader -file $screenshot_file

echo "스크린샷 업로드 완료: $screenshot_file"
```

### 3. 로그 파일 주기적 업로드

```bash
#!/bin/bash
# log-uploader.sh

LOG_FILE="/var/log/application.log"
UPLOAD_LOG="upload_history.log"

# 로그 파일이 존재하는지 확인
if [ -f "$LOG_FILE" ]; then
    # 타임스탬프 추가
    timestamped_log="app_log_$(date +%Y%m%d_%H%M%S).log"
    cp "$LOG_FILE" "$timestamped_log"
    
    # 업로드
    drive-uploader -file "$timestamped_log"
    
    # 기록
    echo "$(date): $timestamped_log uploaded" >> $UPLOAD_LOG
    
    # 임시 파일 정리
    rm "$timestamped_log"
fi
```

## 고급 사용법

### 1. 셸 별칭 설정

자주 사용하는 명령어를 별칭으로 등록하여 편리하게 사용:

```bash
# ~/.bashrc 또는 ~/.zshrc에 추가
alias dup='drive-uploader -file'
alias dup-backup='./backup.sh'
alias dup-ss='./screenshot-upload.sh'

# 적용
source ~/.bashrc  # 또는 source ~/.zshrc

# 사용
dup test.txt
dup-backup
dup-ss
```

### 2. 파일 와일드카드 사용 (확장 예정)

향후 버전에서는 와일드카드 지원이 계획되어 있습니다:

```bash
# 다중 파일 업로드 (계획 중)
drive-uploader -file "*.pdf"
drive-uploader -file "logs/*.log"
```

### 3. 폴더 업로드 (확장 예정)

향후 버전에서는 폴더 단위 업로드가 계획되어 있습니다:

```bash
# 폴더 전체 업로드 (계획 중)
drive-uploader -folder ./documents
drive-uploader -folder ~/Pictures --recursive
```

## 인증 관리

### 현재 인증 상태 확인

```bash
# 토큰 파일 존재 확인
ls -la token.json

# 토큰 내용 확인 (보안을 위해 주의)
cat token.json | jq .
```

### 인증 초기화

인증 문제가 발생할 경우 토큰을 초기화할 수 있습니다:

```bash
# 토큰 파일 삭제
rm token.json

# 다음 실행 시 자동으로 재인증 절차 진행됨
drive-uploader -file test.txt
```

## 팁과 권장사항

### 1. 파일 경로 최적화

- **절대 경로 사용**: 스크립트에서는 절대 경로 사용 권장
- **공백 처리**: 파일 경로에 공백이 있는 경우 따옴표 사용

```bash
# 좋은 예
drive-uploader -file "/path/to/my file.txt"

# 나쁜 예
drive-uploader -file /path/to/my file.txt
```

### 2. 대용량 파일 업로드

- **안정적인 네트워크**: 대용량 파일은 안정적인 네트워크에서 업로드
- **파일 크기 확인**: 업로드 전 파일 크기 확인

```bash
# 파일 크기 확인
ls -lh large_file.zip

# 업로드
drive-uploader -file large_file.zip
```

### 3. 에러 핸들링

```bash
#!/bin/bash
# robust-upload.sh

FILE_PATH="$1"

if [ -z "$FILE_PATH" ]; then
    echo "사용법: $0 <파일경로>"
    exit 1
fi

if [ ! -f "$FILE_PATH" ]; then
    echo "오류: 파일이 존재하지 않습니다: $FILE_PATH"
    exit 1
fi

# 업로드 시도
if drive-uploader -file "$FILE_PATH"; then
    echo "성공: $FILE_PATH 업로드 완료"
else
    echo "실패: $FILE_PATH 업로드 중 오류 발생"
    exit 1
fi
```

## 문제 해결

### 일반적인 오류 메시지

1. **"Error: -file argument is required"**
   - 해결책: `-file` 옵션과 파일 경로를 함께 입력

2. **"Fatal: Unable to read client secret file"**
   - 해결책: `credentials.json` 파일이 있는지 확인

3. **"Fatal: Failed to upload file"**
   - 해결책: 파일 경로, 네트워크 연결, 권한 확인

### 로그 분석

상세한 디버깅을 위해 로그를 파일로 저장:

```bash
# 로그 파일로 출력
drive-uploader -file test.txt 2>&1 | tee upload.log

# 로그 분석
cat upload.log
```

## 다음 단계

더 자세한 인증 관리 방법은 [인증 관리 가이드](05_인증_관리.md)를 참고하세요.
